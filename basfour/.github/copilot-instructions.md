<!-- .github/copilot-instructions.md -->
# Copilot instructions for the Balzac minisite

This is a small, self-hosted static multilingual minisite generated by a tiny Node.js build script. Keep edits focused, minimal and predictable: this repo is intended to generate a finished set of static HTML pages (no server runtime beyond generating files).

Key facts — read before editing
- Single-step build: `node build.js` (runs synchronously, writes files to project root).
- Template: `templates/layout.html` contains three placeholders used by the script: `{{lang}}`, `{{title}}`, `{{nav}}`, `{{content}}`.
- Content is generated programmatically in `build.js` — page text, navigation and language-switch logic live there.
- Assets (CSS, images) live under `assets/` and are referenced with absolute paths like `/assets/...`.

Project structure and important files
- `build.js` — single source of truth for pages, languages, navigation and the equipment catalogue (`EQUIP_ITEMS`). Prefer changing data in the arrays/objects at the top of this file rather than scattering content into new template files.
- `templates/layout.html` — small HTML shell. Do not change placeholder names unless you update `build.js` accordingly.
- `assets/style.css` and `assets/images/*` — visual resources. Image filenames referenced in `EQUIP_ITEMS` must match files here.
- Generated files: `fr.html`, `en.html`, `es.html`, `fr-checkin.html`, etc. These are overwritten by the build.

Behavioral conventions to follow
- Language handling: LANGS = ['fr','en','es']. All page generation loops use this array; add/remove languages only after updating every language-specific text block in `build.js` and verifying navigation links.
- Page list: `PAGES` contains the canonical list of slug names. To add a new page, append its slug to `PAGES` and add a corresponding case in `pageContent(lang, slug)`.
- Equipment items: Edit `EQUIP_ITEMS` to add/remove equipment. Each item should have `key`, `titles`, `cover`, `photos`, and `desc` keys. The `key` becomes part of generated filenames (`{lang}-equip-{key}.html`).
- Escaping helpers: `escapeHtml` and `escapeAttr` are intentionally applied to all injected strings; preserve usage when adding replacements to avoid XSS-like issues in the generated files.

Build and developer workflow
- To regenerate the site locally: run `node build.js` from the repository root. It writes HTML files to the repo root and logs generated filenames.
- OVERWRITE_EXISTING constant at the top controls whether existing generated files are replaced; set to `false` to protect hand-edits (not recommended — the design expects generated files to be authoritative).
- No package.json or npm tooling in this repo; Node.js must be available on the developer machine.

Patterns and small examples
- Navigation: `buildNav(currentLang, currentSlug)` builds the page nav and language switch links. The language links point to `/{lang}-{slug}.html`.
- Template replacement: `renderPage` replaces exact tokens from `layout.html` (use `.replaceAll('{{content}}', ...)`). If you change spacing or token names in the template, update `renderPage` accordingly.
- Wi‑Fi block: The `WIFI` object at top is used by `wifiBlock(lang)` and copied into the generated markup and a client-side clipboard button. If you change credentials, update `WIFI` only.

Safe editing recommendations for AI agents
- Prefer editing or adding small functions inside `build.js` rather than creating alternate build flows. This keeps the repo simple.<br>
- When adding content, follow existing structure: add strings localized in all three languages where other languages already exist; use the same HTML patterns (callout/warn/ok classes, inline styles) to match the look.
- When adding images, reference paths under `/assets/images/` and ensure the files exist. If adding new image files is required, list the filename change in the PR.
- Tests: none present. After changes, always run `node build.js` locally and spot-check at least one generated page in a browser (open `fr-wifi.html` or `index.html`).

Examples you can follow
- Add a new equipment item (example snippet inside `EQUIP_ITEMS`):

  { key: 'new-item', titles: { fr: 'Nom FR', en: 'Name EN', es: 'Nombre ES' }, cover: '/assets/images/new.jpg', photos: ['/assets/images/new.jpg'], desc: { fr:'', en:'', es:'' } }

- Add a new page slug `faq`: append 'faq' to `PAGES` and add `if (slug === 'faq') return faqBlock(lang);` plus a `function faqBlock(lang){...}` following existing page blocks.

What not to do
- Do not introduce a different templating engine or build system in this repo’s tree. The minimal design purposefully avoids build dependencies.
- Avoid editing generated HTML files by hand — prefer to keep `build.js` authoritative.

Files to reference when editing or debugging
- `build.js` — logic, data, tokens, helpers
- `templates/layout.html` — placeholders and shell
- `assets/style.css` — styling conventions

If something seems missing or you need to add tests or a modern build pipeline, open an issue describing the goal; significant changes should be discussed before large refactors.

----
If any part of these instructions is unclear, tell me which area you want expanded (e.g., add a new page, change languages, add images) and I will refine the guidance.
